return function()
    local telescope = require("telescope")
    telescope.setup({
        defaults = {
            borderchars = { "═", "║", "═", "║", "╔", "╗", "╝", "╚" },
        },
        extensions = {
            media_files = {
                filetypes = { "png", "webp", "jpg", "jpeg" },
                find_cmd = "rg",
            },
        },
    })
    telescope.load_extension("media_files")

    local opt = { noremap = true, silent = true }
    -- mappings
    vim.api.nvim_set_keymap("n", "<Leader>sf", [[<Cmd>lua require('telescope.builtin').find_files()<CR>]], opt)
    vim.api.nvim_set_keymap("n", "<Leader>sg", [[<Cmd>lua require('telescope.builtin').live_grep()<CR>]], opt)
    vim.api.nvim_set_keymap("n", "<Leader>sb", [[<Cmd>lua require('telescope.builtin').buffers()<CR>]], opt)
    vim.api.nvim_set_keymap("n", "<Leader>sh", [[<Cmd>lua require('telescope.builtin').help_tags()<CR>]], opt)
    vim.api.nvim_set_keymap("n", "<Leader>sp", [[<Cmd>lua require('telescope').extensions.media_files.media_files()<CR>]], opt)
end